# Use the latest 2.1 version of CircleCI pipeline process engine. See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1

commands:
  print_pipeline_id:
   description: "print workflow id"
   steps:
     - run : echo $CIRCLE_WORKFLOW_ID

# Use a package of configuration called an orb.
jobs:
  cause_failure:
    docker:
      - image: circleci/node:13.8.0
    steps:
      - run : return 1
      - run :
          name: handle error
          command: echo "Hello Error"
          when: on_fail
  # use_commands:
  #    docker:
  #      - image: circleci/node:13.8.0
  #    steps:
  #      - print_pipeline_id
  # save_hello_world_output:
  #   docker:
  #     - image: circleci/node:13.8.0
  #   steps:
  #     - run:
  #        name: input 
  #        command:
  #         echo "hello world" > ~/output.txt
  #     - persist_to_workspace:
  #         root: ~/
  #         paths:
  #           - output.txt

  # print_output_file:
  #   docker:
  #     - image: circleci/node:13.8.0
  #   steps:
  #     - attach_workspace:
  #         at: ~/
  #     - run:
  #        name: echo output
  #        command:
  #         cat ~/output.txt

# Orchestrate or schedule a set of jobs
workflows:
  # Name the workflow "welcome"
  welcome:
    # Run the welcome/run job in its own container
    jobs:
      - cause_failure
      # - use_commands
      # - save_hello_world_output
      # - print_output_file :
      #    requires :
      #      - save_hello_world_output
